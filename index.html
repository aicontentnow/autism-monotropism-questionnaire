<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Monotropism Questionnaire</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Lucide React icons as inline SVG components
        const Copy = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
        );

        const RotateCcw = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="1 4 1 10 7 10"></polyline>
                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
            </svg>
        );

        const Info = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
        );

        const ChevronDown = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
        );

        const MonotropismQuestionnaire = () => {
            const questions = [
                { id: 1, text: "After a period of instability, I need a quiet and predictable environment.", reverse: false },
                { id: 2, text: "I need a quiet and predictable environment for me to switch from one task to another easily.", reverse: false },
                { id: 3, text: "I often struggle to concentrate in busy and/or unpredictable environments.", reverse: false },
                { id: 4, text: "I find sudden unexpected disruptions to my attention startling.", reverse: false },
                { id: 5, text: "It's distressing to be unexpectedly pulled away from something I'm engaged in.", reverse: false },
                { id: 6, text: "I rarely find simultaneously holding eye contact and making a verbal conversation with another person uncomfortable.", reverse: true },
                { id: 7, text: "I often notice details that others do not.", reverse: false },
                { id: 8, text: "Involvement in an activity of interest often reduces my anxiety level.", reverse: false },
                { id: 9, text: "I find social interactions more comfortable if communicating about a topic of interest to me.", reverse: false },
                { id: 10, text: "I am often totally focused on activities I am passionate about, to the point I am unaware of other events.", reverse: false },
                { id: 11, text: "I can get quite good at something even if I'm not especially interested in it.", reverse: true },
                { id: 12, text: "I often lose sense of time when engaging in activities I am passionate about.", reverse: false },
                { id: 13, text: "I sometimes avoid talking because I cannot reliably predict how others will react, especially strangers.", reverse: false },
                { id: 14, text: "I tend to do activities because I find them interesting, instead of due to societal expectations.", reverse: false },
                { id: 15, text: "I rarely find social situations chaotic.", reverse: true },
                { id: 16, text: "I don't mind if someone interrupts me when I'm in the middle of an activity.", reverse: true },
                { id: 17, text: "When I'm working on something, I'm open to helpful suggestions.", reverse: true },
                { id: 18, text: "I often find it difficult to switch topics after engaging in an activity for a long time.", reverse: false },
                { id: 19, text: "I often engage in activities I am passionate about to escape from anxiety.", reverse: false },
                { id: 20, text: "Routines provide an important source of stability and safety.", reverse: false },
                { id: 21, text: "I manage uncertainty by creating routines.", reverse: false },
                { id: 22, text: "I often experience anxiety over matters I have little certainty over.", reverse: false },
                { id: 23, text: "I find it difficult to engage in a task of no interest to me even if it is important.", reverse: false },
                { id: 24, text: "I often find engaging in stimming (e.g., fidgeting, rocking) to be relaxing.", reverse: false },
                { id: 25, text: "I am usually passionate about a few topics at any one time in my life.", reverse: false },
                { id: 26, text: "I have trouble filtering out sounds when I am not doing something I'm focused on.", reverse: false },
                { id: 27, text: "I usually mean what I say and no more than that.", reverse: false },
                { id: 28, text: "I often engage in lengthy discussions on topics I find interesting even though my conversational partner(s) do not.", reverse: false },
                { id: 29, text: "I sometimes accidentally say something others find offensive/rude when I am focused on a task.", reverse: false },
                { id: 30, text: "I can sometimes be very distressed by a topic that others think of as trivial.", reverse: false },
                { id: 31, text: "I find it easy to keep up with group discussions where everyone is speaking.", reverse: true },
                { id: 32, text: "Often when I am focused on activities, I do not notice I am thirsty or hungry.", reverse: false },
                { id: 33, text: "Often when I am focused on activities, I do not notice I need the bathroom.", reverse: false },
                { id: 34, text: "When there is a lot of information to consider, I often struggle to make a decision.", reverse: false },
                { id: 35, text: "Sometimes making a decision is so hard I get physically stuck.", reverse: false },
                { id: 36, text: "I sometimes focus on an incident for a substantial time (days) after the event.", reverse: false },
                { id: 37, text: "I sometimes become highly anxious by focusing on the many possible situations that might occur at a future event.", reverse: false },
                { id: 38, text: "Sometimes when I am focused on an activity, I do not recall all the information I might need to make good decisions.", reverse: false },
                { id: 39, text: "People tell me I get fixated on things.", reverse: false },
                { id: 40, text: "I find a problem I can't solve distressing and/or hard to put down.", reverse: false },
                { id: 41, text: "I tend to feel quite self-conscious unless I'm deeply absorbed in a task.", reverse: false },
                { id: 42, text: "I often get stuck thinking about all the possibilities that might come out of a decision.", reverse: false },
                { id: 43, text: "When I am interested in something, I tend to be passionate about it.", reverse: false },
                { id: 44, text: "When I am interested in a topic, I like to learn everything I can about that topic.", reverse: false },
                { id: 45, text: "I am still fascinated by many of the things I was interested in when I was much younger.", reverse: false },
                { id: 46, text: "I rarely find myself getting stuck in loops of thought.", reverse: true },
                { id: 47, text: "I often loop back to previous thoughts.", reverse: false }
            ];

            const [responses, setResponses] = useState({});
            const [showInfo, setShowInfo] = useState(false);
            const [showScore, setShowScore] = useState(false);
            const [showResultsText, setShowResultsText] = useState(false);

            const scaleOptions = [
                { value: 1, label: 'Strongly disagree' },
                { value: 2, label: 'Disagree' },
                { value: 3, label: 'Neither agree nor disagree' },
                { value: 4, label: 'Agree' },
                { value: 5, label: 'Strongly agree' },
                { value: 0, label: 'Not applicable' }
            ];

            const handleResponse = (questionId, value) => {
                setResponses(prev => ({
                    ...prev,
                    [questionId]: value
                }));
            };

            const calculateScore = () => {
                let totalScore = 0;
                let answeredCount = 0;

                questions.forEach(q => {
                    const response = responses[q.id];
                    if (response !== undefined && response !== 0) {
                        answeredCount++;
                        if (q.reverse) {
                            totalScore += (6 - response);
                        } else {
                            totalScore += response;
                        }
                    }
                });

                return answeredCount > 0 ? {
                    total: totalScore,
                    answered: answeredCount,
                    possible: answeredCount * 5,
                    percentage: ((totalScore / (answeredCount * 5)) * 100).toFixed(1)
                } : null;
            };

            const getScoreInterpretation = (percentage) => {
                const pct = parseFloat(percentage);
                if (pct >= 80) {
                    return {
                        level: "Very High Monotropism",
                        description: "Your responses indicate very strong monotropic traits. You likely experience deep, intense focus on specific interests, may find multitasking challenging, and benefit from predictable environments with minimal interruptions.",
                        color: "from-purple-600 to-indigo-600"
                    };
                } else if (pct >= 65) {
                    return {
                        level: "High Monotropism",
                        description: "Your responses show strong monotropic characteristics. You probably prefer focusing deeply on fewer interests and may find unexpected changes or interruptions particularly disruptive.",
                        color: "from-indigo-600 to-blue-600"
                    };
                } else if (pct >= 50) {
                    return {
                        level: "Moderate Monotropism",
                        description: "Your responses suggest moderate monotropic traits. You may experience some monotropic characteristics but also have capacity for broader attention distribution.",
                        color: "from-blue-600 to-cyan-600"
                    };
                } else {
                    return {
                        level: "Lower Monotropism",
                        description: "Your responses indicate fewer monotropic traits, suggesting you may find it easier to distribute attention across multiple interests and adapt to changing environments.",
                        color: "from-cyan-600 to-teal-600"
                    };
                }
            };

            const resetQuestionnaire = () => {
                if (confirm('Are you sure you want to clear all responses?')) {
                    setResponses({});
                    setShowScore(false);
                    setShowResultsText(false);
                }
            };

            const generateResultsText = () => {
                const score = calculateScore();
                if (!score) return '';

                const interpretation = getScoreInterpretation(score.percentage);
                return `MONOTROPISM QUESTIONNAIRE RESULTS
Date: ${new Date().toLocaleDateString()}

SCORE: ${score.total} / ${score.possible} (${score.percentage}%)
Questions answered: ${score.answered} of ${questions.length}

INTERPRETATION: ${interpretation.level}
${interpretation.description}

INDIVIDUAL RESPONSES:
${questions.map(q => {
    const response = responses[q.id];
    const responseLabel = response !== undefined 
        ? scaleOptions.find(opt => opt.value === response)?.label 
        : 'Not answered';
    return `${q.id}. ${q.text}
   Response: ${responseLabel}`;
}).join('\n\n')}

---
The Monotropism Questionnaire
Garau, V., Woods, R., Chown, N., Hallett, S., Murray, F., Wood, R., Murray, A. & Fletcher-Watson, S. (2023)
Licensed under CC BY-NC-SA
https://doi.org/10.17605/OSF.IO/G2NM7`;
            };

            const score = calculateScore();
            const progress = (Object.keys(responses).length / questions.length) * 100;
            const isComplete = Object.keys(responses).length === questions.length;
            const interpretation = score ? getScoreInterpretation(score.percentage) : null;

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 p-4 sm:p-8">
                    <div className="max-w-4xl mx-auto">
                        <div className="bg-white rounded-2xl shadow-lg p-6 sm:p-8 mb-6">
                            <h1 className="text-3xl sm:text-4xl font-bold text-gray-900 mb-4">
                                The Monotropism Questionnaire
                            </h1>
                            
                            <div className="flex items-start gap-2 text-sm text-gray-600 mb-4">
                                <Info className="w-5 h-5 flex-shrink-0 mt-0.5 text-indigo-600" />
                                <div>
                                    <p className="mb-2">
                                        <strong>About Monotropism:</strong> A theory that suggests autistic attention tends to focus deeply on fewer interests at a time, 
                                        rather than spreading broadly across many. This questionnaire helps explore monotropic traits.
                                    </p>
                                    <button 
                                        onClick={() => setShowInfo(!showInfo)}
                                        className="text-indigo-600 hover:text-indigo-700 font-medium underline"
                                    >
                                        {showInfo ? 'Hide' : 'Show'} citation & license info
                                    </button>
                                </div>
                            </div>

                            {showInfo && (
                                <div className="bg-indigo-50 rounded-lg p-4 text-sm text-gray-700 space-y-2">
                                    <p><strong>Citation:</strong> Garau, V., Woods, R., Chown, N., Hallett, S., Murray, F., Wood, R., Murray, A. & Fletcher-Watson, S. (2023). 
                                    The Monotropism Questionnaire, Open Science Framework.</p>
                                    <p><strong>License:</strong> CC BY-NC-SA (Creative Commons Attribution-NonCommercial-ShareAlike)</p>
                                    <p><strong>Pre-registration:</strong> <a href="https://doi.org/10.17605/OSF.IO/G2NM7" target="_blank" rel="noopener noreferrer" 
                                        className="text-indigo-600 hover:text-indigo-700 underline">https://doi.org/10.17605/OSF.IO/G2NM7</a></p>
                                </div>
                            )}
                        </div>

                        <div className="sticky top-0 z-50 bg-white rounded-xl shadow-lg p-4 mb-6 backdrop-blur-sm bg-white/95">
                            <div className="flex justify-between text-sm text-gray-600 mb-2">
                                <span className="font-medium">Progress</span>
                                <span className="font-semibold text-indigo-600">{Object.keys(responses).length} of {questions.length}</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-3">
                                <div 
                                    className="bg-indigo-600 h-3 rounded-full transition-all duration-300"
                                    style={{ width: `${progress}%` }}
                                />
                            </div>
                        </div>

                        <div className="space-y-4">
                            {questions.map((question, index) => (
                                <div key={question.id} className="bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow">
                                    <p className="text-gray-900 font-medium mb-4">
                                        <span className="text-indigo-600 font-bold">{index + 1}.</span> {question.text}
                                    </p>
                                    
                                    <div className="space-y-2">
                                        {scaleOptions.map(option => (
                                            <label
                                                key={option.value}
                                                className={`flex items-center p-3 rounded-lg cursor-pointer transition-all ${
                                                    responses[question.id] === option.value
                                                        ? 'bg-indigo-100 border-2 border-indigo-600'
                                                        : 'bg-gray-50 border-2 border-transparent hover:bg-gray-100'
                                                }`}
                                            >
                                                <input
                                                    type="radio"
                                                    name={`question-${question.id}`}
                                                    value={option.value}
                                                    checked={responses[question.id] === option.value}
                                                    onChange={() => handleResponse(question.id, option.value)}
                                                    className="w-5 h-5 text-indigo-600 focus:ring-indigo-500"
                                                />
                                                <span className="ml-3 text-gray-700">{option.label}</span>
                                            </label>
                                        ))}
                                    </div>
                                </div>
                            ))}
                        </div>

                        {isComplete && !showScore && (
                            <div className="mt-8 text-center">
                                <button
                                    onClick={() => setShowScore(true)}
                                    className="bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all flex items-center gap-2 mx-auto"
                                >
                                    View My Score
                                    <ChevronDown className="w-5 h-5" />
                                </button>
                            </div>
                        )}

                        {showScore && score && interpretation && (
                            <div className={`mt-8 bg-gradient-to-r ${interpretation.color} rounded-2xl shadow-xl p-6 sm:p-8 text-white`}>
                                <h2 className="text-3xl font-bold mb-6 text-center">Your Results</h2>
                                
                                <div className="grid sm:grid-cols-2 gap-6 mb-6">
                                    <div className="bg-white/20 rounded-xl p-4 backdrop-blur-sm">
                                        <p className="text-white/80 text-sm mb-1">Total Score</p>
                                        <p className="text-4xl font-bold">{score.total} / {score.possible}</p>
                                    </div>
                                    <div className="bg-white/20 rounded-xl p-4 backdrop-blur-sm">
                                        <p className="text-white/80 text-sm mb-1">Percentage</p>
                                        <p className="text-4xl font-bold">{score.percentage}%</p>
                                    </div>
                                </div>

                                <div className="bg-white/20 rounded-xl p-6 backdrop-blur-sm mb-6">
                                    <h3 className="text-2xl font-bold mb-3">{interpretation.level}</h3>
                                    <p className="text-white/90 leading-relaxed">{interpretation.description}</p>
                                </div>

                                <div className="bg-white/10 rounded-lg p-4 mb-6 backdrop-blur-sm">
                                    <p className="text-sm text-white/80">
                                        <strong>Note:</strong> This questionnaire is descriptive, not diagnostic. It explores monotropic traits as understood within 
                                        the autistic community and neurodiversity framework. Higher scores suggest stronger alignment with monotropic attention patterns.
                                    </p>
                                </div>

                                <div className="mb-4">
                                    <button
                                        onClick={() => setShowResultsText(!showResultsText)}
                                        className="w-full flex items-center justify-center gap-2 bg-white text-indigo-600 px-6 py-4 rounded-lg font-bold text-lg hover:bg-white/90 transition-colors"
                                    >
                                        <Copy className="w-5 h-5" />
                                        {showResultsText ? 'Hide Full Results' : 'Show Full Results to Copy'}
                                    </button>
                                </div>

                                {showResultsText && (
                                    <div className="bg-white rounded-lg p-4 mb-4">
                                        <p className="text-sm text-gray-600 mb-3 font-medium">
                                            ðŸ“‹ Tap the text below, select all, and copy to save your results:
                                        </p>
                                        <textarea
                                            readOnly
                                            value={generateResultsText()}
                                            className="w-full h-96 p-4 border-2 border-gray-300 rounded-lg text-sm font-mono resize-none focus:border-indigo-500 focus:outline-none"
                                            onClick={(e) => e.target.select()}
                                        />
                                    </div>
                                )}
                            </div>
                        )}

                        {Object.keys(responses).length > 0 && (
                            <div className="mt-6 text-center">
                                <button
                                    onClick={resetQuestionnaire}
                                    className="flex items-center gap-2 bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors mx-auto"
                                >
                                    <RotateCcw className="w-5 h-5" />
                                    Start Over
                                </button>
                            </div>
                        )}

                        <div className="mt-8 text-center text-sm text-gray-500 pb-8">
                            <p>This is an adapted version created for personal use.</p>
                            <p className="mt-1">Original questionnaire by Garau et al. (2023) â€¢ Licensed under CC BY-NC-SA</p>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MonotropismQuestionnaire />);
    </script>
</body>
</html>
